# –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ "PostgreSQL –≤ Minikube"

### –¶–µ–ª—å: —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å PostgreSQL –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä–µ Minikube, –æ–±–µ—Å–ø–µ—á–∏—Ç—å –µ—ë –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å


##### –û–ø–∏—Å–∞–Ω–∏–µ/–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è:

–û–ø–∏—Å–∞–Ω–∏–µ/–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è:

10 —è–Ω–≤–∞—Ä—è, 08:00
–®—Ç–∞–±-–∫–≤–∞—Ä—Ç–∏—Ä–∞ BananaFlow

–ê–ª–µ–∫—Å–µ–π –ø–æ—Ç—è–≥–∏–≤–∞–ª –∫–æ—Ñ–µ, –∫–æ–≥–¥–∞ –≤ —á–∞—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤—Å–ø–ª—ã–ª–æ —Ç—Ä–µ–≤–æ–∂–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:

[–ê–≤—Å—Ç—Ä–∞–ª–∏–π—Å–∫–∏–π —Ñ–∏–ª–∏–∞–ª]

"–†–µ–±—è—Ç–∞, —É –Ω–∞—Å –∫—Ä–∏–∑–∏—Å! –ò–∑-–∑–∞ —Ü–∏–∫–ª–æ–Ω–∞ ¬´–ò–ª–æ–Ω–∞¬ª –≤—Å–µ —Ä–µ–π—Å—ã –∑–∞–¥–µ—Ä–∂–∞–Ω—ã. –ö–ª–∏–µ–Ω—Ç—ã –≤ –ø–∞–Ω–∏–∫–µ ‚Äî 300 —Ç–æ–Ω–Ω –±–∞–Ω–∞–Ω–æ–≤ –º–æ–≥—É—Ç –∏—Å–ø–æ—Ä—Ç–∏—Ç—å—Å—è –≤ –ø–æ—Ä—Ç—É. –õ–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –ë–î –ø–∞–¥–∞–µ—Ç –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π!"

–û–ª–µ–≥ (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–∏—Ä–µ–∫—Ç–æ—Ä) —Ç—É—Ç –∂–µ —Å–æ–∑–≤–∞–ª —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Å–æ–≤–µ—â–∞–Ω–∏–µ:

‚Äî "–ù–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ—Å—Ç–∞–≤–∫–∏ —á–µ—Ä–µ–∑ –¥—Ä—É–≥–∏–µ –ø–æ—Ä—Ç—ã. –ù–æ —Ç–µ–∫—É—â–∞—è –ë–î –Ω–µ –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç 12 —Ñ–∏–ª–∏–∞–ª–æ–≤!"

–ê–ª–µ–∫—Å–µ–π –ø—Ä–µ–¥–ª–æ–∂–∏–ª:

‚Äî "–î–∞–≤–∞–π—Ç–µ —Å—Ä–æ—á–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—ë–º PostgreSQL –≤ Minikube –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ–º –µ—ë –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π, –ø—Ä–µ–∂–¥–µ —á–µ–º –≤—ã–∫–∞—Ç—ã–≤–∞—Ç—å –≤ –ø—Ä–æ–¥!"

üöß¬†**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞**

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ Minikube.
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã kubectl –∏ psql.

![4e134f3a2fc74afe4f0ebdf999c2153d.png](./4e134f3a2fc74afe4f0ebdf999c2153d.png)


üî®¬†**–û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å**

–®–∞–≥ 1: –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å PostgreSQL —á–µ—Ä–µ–∑ –º–∞–Ω–∏—Ñ–µ—Å—Ç

–°–æ–∑–¥–∞–π—Ç–µ Deployment –∏ Service –¥–ª—è PostgreSQL.
![cd50eda04e46a30ce1f0dc049abe6522.png](./cd50eda04e46a30ce1f0dc049abe6522.png)
–£–∫–∞–∂–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Deployment (–Ω–∞–ø—Ä–∏–º–µ—Ä, POSTGRES_USER –∏ POSTGRES_PASSWORD).

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (kubectl port-forward + psql).

![4568ec2ee3e37d50cc71a9d561d542d0.png](./4568ec2ee3e37d50cc71a9d561d542d0.png)


‚≠ê¬†**–ó–∞–¥–∞–Ω–∏–µ –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏**

–®–∞–≥ 2: –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å PostgreSQL —á–µ—Ä–µ–∑ Helm

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Helm.
![9223cfa223ba420b5ceacfe3ec9c142c.png](./9223cfa223ba420b5ceacfe3ec9c142c.png)

–ù–∞–π–¥–∏—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π Helm-—á–∞—Ä—Ç PostgreSQL 14 (–Ω–∞–ø—Ä–∏–º–µ—Ä, Bitnami PostgreSQL).
![b5ad7ea90d5f7d7caab69c5d25bbd612.png](./b5ad7ea90d5f7d7caab69c5d25bbd612.png)
–£–∫–∞–∂–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ values.yaml.
![bdc88fc420ce1198208548e3edd87c88.png](./bdc88fc420ce1198208548e3edd87c88.png)
–û–±–µ—Å–ø–µ—á—å—Ç–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å: –∑–∞–¥–∞–π—Ç–µ replicaCount: 3 –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ StatefulSet, –µ—Å–ª–∏ —É–≤–µ—Ä–µ–Ω—ã.


üî•¬†**–ö—Ä–∏–∑–∏—Å–Ω—ã–π –º–æ–º–µ–Ω—Ç**

12:30 ‚Äî –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –ê–≤—Å—Ç—Ä–∞–ª–∏–∏:

_"–¶–∏–∫–ª–æ–Ω —É—Å–∏–ª–∏–≤–∞–µ—Ç—Å—è! –ù—É–∂–Ω–æ –ø–µ—Ä–µ–±—Ä–æ—Å–∏—Ç—å –∑–∞–ø–∞—Å—ã –≤ –°–∏–¥–Ω–µ–π –¥–æ 15:00!"_

–ê–ª–µ–∫—Å–µ–π:¬†_"–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—Å—è!"_

* –£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–æ–≤ –¥–æ 3
![ece5986027c25e42eff4e5018355f6cc.png](./ece5986027c25e42eff4e5018355f6cc.png)

* –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–æ–¥—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ Running
![8479c5e1aac8ddf9d2f8f52a5ff62006.png](./8479c5e1aac8ddf9d2f8f52a5ff62006.png)

![5ddb99ed7ebc8f875e94a76d1ed7089e.png](./5ddb99ed7ebc8f875e94a76d1ed7089e.png)

**üìé –ß—Ç–æ —Å–¥–∞–≤–∞—Ç—å**

üì∑ –°–∫—Ä–∏–Ω—à–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ SELECT-–∑–∞–ø—Ä–æ—Å–∞ –∏–∑ PostgreSQL

üì∑ –°–∫—Ä–∏–Ω—à–æ—Ç –≤—ã–≤–æ–¥–∞ kubectl get pods
(–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å –Ω–µ –Ω—É–∂–Ω–æ!)

üí°¬†**–≠–ø–∏–ª–æ–≥**

16:00, —Ç–æ—Ç –∂–µ –¥–µ–Ω—å

–í —á–∞—Ç–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ñ–æ—Ç–æ: –≥—Ä—É–∑–æ–≤–∏–∫–∏ —Å –±–∞–Ω–∞–Ω–∞–º–∏ –±–ª–∞–≥–æ–ø–æ–ª—É—á–Ω–æ –ø—Ä–∏–±—ã–ª–∏ –≤ –°–∏–¥–Ω–µ–π.

–û–ª–µ–≥ (–≥–ª—è–¥—è –Ω–∞ –ê–ª–µ–∫—Å–µ—è):

_‚Äî "–•–æ—Ä–æ—à–∞—è —Ä–∞–±–æ—Ç–∞. –ù–æ... ‚Äî –¥–æ—Å—Ç–∞—ë—Ç —Å–ø–∏—Å–æ–∫ –∏–∑ 5 –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á ‚Äî —Ç–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤."_




–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏:

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞ –≤ Minikube
–ë–î –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π SELECT-–∑–∞–ø—Ä–æ—Å
–í kubectl get pods –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è 3 —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ø–æ–¥–∞


