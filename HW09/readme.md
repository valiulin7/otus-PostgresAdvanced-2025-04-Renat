# Домашнее задание "PostgreSQL и VKcloud, ЯО, Sbercloud"

### Цель: научиться пользоваться PostgreSQL based и like сервисами в VKcloud, ЯО, Sbercloud



##### Описание/Пошаговая инструкция выполнения домашнего задания:
**Задача:**

* Развернуть managed PostgreSQL в двух облаках (на выбор: VK Cloud, Yandex Cloud, SberCloud).
* Минимальные параметры: 1 vCPU, 1 ГБ RAM
* Настроить доступ с вашего IP
* Проверить подключение через psql
* Сравнить характеристики:
* Стоимость в месяц (включая резервные копии)
* Latency при выполнении запросов
* Удобство управления (интерфейс, документация)
* Документировать процесс:
  
  Какие облака выбрали и почему

#### Ориентируюсь на популярность сервисов, вначале выбрал# Managed PostgreSQL®
 

![c8d9293916335351ae2a8a999c6cf3af.png](./c8d9293916335351ae2a8a999c6cf3af.png)

![a815f21b213cd92f904096bf684c4a8b.png](./a815f21b213cd92f904096bf684c4a8b.png)

![9e815cccb06383450c7aa4ca58b491be.png](./9e815cccb06383450c7aa4ca58b491be.png)

![66770baa399c5bbbdc1abb0e5fa8ddde.png](./66770baa399c5bbbdc1abb0e5fa8ddde.png)

![831494a24c5bda75b20feb8d5b2b5092.png](./831494a24c5bda75b20feb8d5b2b5092.png)

![25fdf0dda1e57c01d0d19e27d1000772.png](./25fdf0dda1e57c01d0d19e27d1000772.png)
#### Затем выбрал "VK Cloud" но развернуть ничего не получилось потому что не смог настроить двухфакторную аутентификацию, поэтому настроил с "Managed PostgreSQL® c cloud.ru"

![592709cc5938d476514d71966e94ee22.png](./592709cc5938d476514d71966e94ee22.png)
![0d2ac29ed71595af383515f3e4210c8b.png](./0d2ac29ed71595af383515f3e4210c8b.png)

![00cf26eae4f4be62cb463cc3a6205b35.png](./00cf26eae4f4be62cb463cc3a6205b35.png)




![48cb01cf7c79087b907e8660a262b9d1.png](./48cb01cf7c79087b907e8660a262b9d1.png)
За месяц ~4500 руб без public ip



###Сравнение сервисов 

**Yandex Managed Service for PostgreSQL** - к плюсам можно отнести удобный CLI, стоимость за месяц видно сразу в явном виде, но стоимость довольно высокая
**PostgreSQL as a Service VK Cloud** - не смог настроить двухфакторную аутентификацию
**Managed PostgreSQL® cloud.ru** - не смог получить токен, получить бесплатный грант можно только заплатив деньги, не нашел в явном виде сумму затрат за месяц,  по сравнению с яндекс если считать за прошедшее время получилось дешевле, пока доступна 16 версия, к сожелению public ip для postgresql настроить нельзя, а настроить доступ с локальной виртуалки по внутренней подсети не получилось.  


  С какими проблемами столкнулись (например, сложность настройки доступа)
* Вывод: какое облако лучше подходит для BananaFlow?

  Порекомендовал бы для BananaFlow пользоваться yandex чтобы сберечь нервы

★ **Задание со звездочкой:**

* Автоматизировать развертывание с помощью Terraform & Ansible:
* Terraform для создания кластеров
* Ansible для настройки подключения и тестовых запросов


