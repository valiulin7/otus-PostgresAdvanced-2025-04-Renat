# –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ "–ö–ª–∞—Å—Ç–µ—Ä—ã –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏"

### –¶–µ–ª—å: –Ω–∞—É—á–∏—Ç—å—Å—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä PostgreSQL —Å –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é –≤ –æ–±–ª–∞–∫–µ –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ, –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏;



##### –û–ø–∏—Å–∞–Ω–∏–µ/–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è:

üîß¬†**–í–∞—Ä–∏–∞–Ω—Ç 1. –ö–ª–∞—Å—Ç–µ—Ä —Å–≤–æ–∏–º–∏ —Ä—É–∫–∞–º–∏**

–†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –≤—ã—Å–æ–∫–æ–¥–æ—Å—Ç—É–ø–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä PostgreSQL –≤—Ä—É—á–Ω—É—é. –í–æ–∑–º–æ–∂–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:

* Patroni + Etcd + HAProxy
* Pacemaker/Corosync/DRBD (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö)

–°—Ä–µ–¥–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ VirtualBox, Proxmox)

![32a30f82ae9fc281b504e27916707f76.png](./32a30f82ae9fc281b504e27916707f76.png)

–¢—Ä–∏ —Å–µ—Ä–≤–µ—Ä–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä Patroni

![b50dcf03e38be7314649885bd646f21d.png](./b50dcf03e38be7314649885bd646f21d.png)


![c9d810ec2e1cdc38877166a57cd4a72e.png](./c9d810ec2e1cdc38877166a57cd4a72e.png)

![97c7261fee153c45cbd6eeb745509861.png](./97c7261fee153c45cbd6eeb745509861.png)

![5055237a5e5ed3a26873ca38055ed6a8.png](./5055237a5e5ed3a26873ca38055ed6a8.png)

![ffd9b0d6f52bad787a556b99208a16e3.png](./ffd9b0d6f52bad787a556b99208a16e3.png)

–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ Keepalived —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ HAProxy:

![21e3366316bd1c1481501d64aaa79d6d.png](./21e3366316bd1c1481501d64aaa79d6d.png)


–°–∏–º–∏—Ç–∏—Ä—É–µ–º –æ—Ç–∫–∞–∑ –∫–ª–∞—Å—Ç–µ—Ä–∞ patroni:

![09e4b30f7de79fe01178d71a7aeb8bb8.png](./09e4b30f7de79fe01178d71a7aeb8bb8.png)
StandBy —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º master

![50e021f9b02ae8ae541aaff48ec813a7.png](./50e021f9b02ae8ae541aaff48ec813a7.png)

–∏ VIP –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ StandBy —Å–µ—Ä–≤–µ—Ä

![e07fce18652dc7ef08849aab3d878a7d.png](./e07fce18652dc7ef08849aab3d878a7d.png)








